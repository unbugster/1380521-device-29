var writeUsButton=document.querySelector(".contact-link"),writeUsPopup=document.querySelector(".modal-write-us"),mapButton=document.querySelector(".map-link"),mapPopup=document.querySelector(".modal-map"),form=writeUsPopup.querySelector("form"),loginLogin=writeUsPopup.querySelector("[name=name]"),loginEmail=writeUsPopup.querySelector("[name=email]");function handlePopupToggle(r){return function(e){var o,t;e.preventDefault(),r&&(r.classList.add("modal-show"),(o=r.querySelector("input"))&&o.focus(),storage?(loginLogin.value=storage,loginPassword.focus()):loginLogin.focus(),(t=r.querySelector(".modal-close"))&&t.addEventListener("click",function(){r.classList.remove("modal-show"),r.classList.remove("modal-error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&r.classList.contains("modal-show")&&(e.preventDefault(),r.classList.remove("modal-show"))}))}}writeUsButton&&writeUsButton.addEventListener("click",handlePopupToggle(writeUsPopup)),mapButton&&mapButton.addEventListener("click",handlePopupToggle(mapPopup));var isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}form.addEventListener("submit",function(e){loginLogin.value&&loginEmail.value?isStorageSupport&&localStorage.setItem("login",loginLogin.value):(e.preventDefault(),writeUsPopup.classList.remove("modal-error"),writeUsPopup.offsetWidth,writeUsPopup.classList.add("modal-error"))});
